<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/x-icon" href="@Url.Content("~/Content/Images/pmacs.ico")">
    <meta name="description" content="Learn how to improve your website with caching, accessibility, and SEO best practices.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mold Die and Cavity Parts Management System</title>
    <link rel="preload" href="@Url.Content("~/Content/fonts/Poppins-Regular.ttf")" as="font" type="font/ttf" crossorigin="anonymous">


    <script src="~/Scripts/Shared/bootstrap.bundle.min.js"></script>
    <script src="~/Scripts/Shared/Global.js"></script>

    @Styles.Render("~/Content/shared-css")
    @Styles.Render("~/Content/pmacs-css")

    @Scripts.Render("~/bundles/shared-js")
    @Scripts.Render("~/bundles/modernizr")

</head>
<body>
    <!--========== NAV ==========-->
    <div class="sidebar" id="sidebar">
        <nav class="sidebar__container">
            <div>
                <a href="#" class="sidebar__link sidebar__logo">
                    <img class="sidebar__image" alt="pmacs_Image" src="~/Content/Images/pmacs.ico" />
                    @*<i class="fa-solid fa-users-viewfinder sidebar__icon"></i>*@
                    <span class="sidebar__logo-name">PMACS</span>
                </a>

                <div class="sidebar__list">
                    <div class="sidebar__items">
                        <h3 class="sidebar__subtitle">Main Menu</h3>


                        <a href="/MoldDie/Mold/DieMoldLife" class="sidebar__link">
                                <i class="fa fa-microchip  sidebar__icon"></i>
                                <span class="sidebar__name">Molding</span>
                            </a>

                            <a href="/MoldDie/Mold/DiePressLife" class="sidebar__link">
                                <i class="fa-solid fa-gears sidebar__icon"></i>
                                <span class="sidebar__name">Press</span>
                            </a>

                       
                    </div>

                    <div class="sidebar__items">
                        @*<h3 class="sidebar__subtitle">Settings</h3>



                            <a href="#" class="sidebar__link">
                                <i class="fa-solid fa-table-columns sidebar__icon"></i>
                                <span class="sidebar__name">Change Password</span>
                            </a>*@

                    </div>
                </div>
            </div>

            <a href="#" id="logID" class="sidebar__link sidebar__logout">
                <i class="fa-solid fa-right-from-bracket sidebar__icon"></i>
                <span class="sidebar__name" id="Exitname">Log Out</span>
            </a>
        </nav>
    </div>

    <!--========== CONTENTS ==========-->
    <main>
        @RenderBody()
    </main>




    <script type="text/javascript">
        const logbtn = document.getElementById("logID");

        /*==================== LINK ACTIVE ====================*/
        const linkColor = document.querySelectorAll('.sidebar__link')

        function colorLink() {
            linkColor.forEach(l => l.classList.remove('active'))
            this.classList.add('active')
        }



        linkColor.forEach(l => l.addEventListener('click', colorLink))
        document.addEventListener("DOMContentLoaded", function () {
            var currentUrl = window.location.pathname.toLowerCase();
            document.querySelectorAll(".sidebar__link").forEach(function (link) {
                if (link.getAttribute("href").toLowerCase() === currentUrl) {
                    link.classList.add("active");
                }
            });
        });


        logbtn.addEventListener('click', function (e) {
            e.preventDefault();

            if (ActionRestrict() !== false) {
                Swal.fire({
                    title: "Sign out ?",
                    text: "Are you sure you want to sign out?",
                    icon: "warning",
                    showCancelButton: true,
                    confirmButtonColor: "#3085d6",
                    cancelButtonColor: "#a3a3a3",
                    confirmButtonText: "Log out"
                }).then((result) => {
                    /* Read more about isConfirmed, isDenied below */
                    if (result.isConfirmed) {
                        //logout();
                        localStorage.removeItem('activeLinkIndex');
                        localStorage.removeItem('UserRole');
                        localStorage.removeItem('users');
                        localStorage.removeItem('isLoggedInPMACS');
                        window.location.href = "/MoldDie/Mold/index";
                    }
                });
            } else {
                localStorage.removeItem('UserRole');
                localStorage.removeItem('Fullname');
                localStorage.removeItem('accessToken');
                localStorage.removeItem('refreshToken');
                localStorage.removeItem('isLoggedInPMACS');
                window.location.href = "/MoldDie/Mold/index";
            }

        });


        if (ActionRestrict() === false) {
            $("#Exitname").text("Exit");
        }


    </script>

    @Html.Partial("_SystemConfig")
</body>
</html>
