@using System.Net
@using System.Net.Sockets
@{
    // Get the server hostname (domain)
    string hostName = Request.Url.Host;

    // Resolve server IP addresses
    var serverIPs = new List<string>();
    try
    {
        var hostEntry = Dns.GetHostEntry(hostName);
        foreach (var ip in hostEntry.AddressList)
        {
            if (ip.AddressFamily == AddressFamily.InterNetwork) // IPv4 only
            {
                serverIPs.Add(ip.ToString());
            }
        }
    }
    catch (Exception ex)
    {
        serverIPs.Add("Error resolving server IP: " + ex.Message);
    }

    // Get client IP
    string clientIp = Request.ServerVariables["HTTP_X_FORWARDED_FOR"];
    if (string.IsNullOrEmpty(clientIp))
    {
        clientIp = Request.ServerVariables["REMOTE_ADDR"];
    }

    // If client IP is still empty, fall back to localhost IP
    if (string.IsNullOrEmpty(clientIp))
    {
        clientIp = "127.0.0.1"; // local IP fallback
    }

    // Attempt to resolve client hostname
    string clientHostName = "Unknown";
    try
    {
        var clientHostEntry = Dns.GetHostEntry(clientIp);
        clientHostName = clientHostEntry.HostName;
    }
    catch
    {
        clientHostName = "Could not resolve hostname";
    }
}

<h3>Domain Info (Server)</h3>
<p><strong>Hostname:</strong> @hostName</p>
<p><strong>Server IP(s):</strong> @string.Join(", ", serverIPs)</p>

<h3>Client Info</h3>
<p><strong>Client IP:</strong> @clientIp</p>
<p><strong>Client Hostname:</strong> @clientHostName</p>
